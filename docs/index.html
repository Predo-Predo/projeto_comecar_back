<!DOCTYPE html>
<html>
<head>
  <base href="/projeto_comecar_back/"><!-- use o seu base href certo -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="description" content="A new Flutter project.">

  <!-- Google Identity Services (GIS) -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="frontend">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>frontend</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <script>
    // 1) Callback que recebe o ID token e dispara evento para o Flutter
    function onGoogleSignIn(response) {
      window.dispatchEvent(
        new CustomEvent('googleLogin', { detail: response.credential })
      );
    }

    // 2) Função que o Flutter chama para abrir o popup
    function showGoogleLogin() {
      if (window.google && google.accounts && google.accounts.id) {
        google.accounts.id.prompt(); 
      } else {
        console.error('GIS client ainda não carregado');
      }
    }

    // 3) Inicializa o GIS assim que a página carrega
    window.onload = function() {
      google.accounts.id.initialize({
        client_id: '669723152550-94kktlea6u9enh9tctf6qh8lb50hg65n.apps.googleusercontent.com',
        callback: onGoogleSignIn,
        ux_mode: 'popup'
      });
    };
  </script>

  <!-- Bootstrap do Flutter (não mexer) -->
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
